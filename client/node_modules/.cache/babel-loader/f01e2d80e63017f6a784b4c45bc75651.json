{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.checkRevision = checkRevision;\nexports.template = template;\nexports.wrapProgram = wrapProgram;\nexports.resolvePartial = resolvePartial;\nexports.invokePartial = invokePartial;\nexports.noop = noop; // istanbul ignore next\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n} // istanbul ignore next\n\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nvar _utils = require('./utils');\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _exception = require('./exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nvar _base = require('./base');\n\nvar _helpers = require('./helpers');\n\nvar _internalWrapHelper = require('./internal/wrapHelper');\n\nvar _internalProtoAccess = require('./internal/proto-access');\n\nfunction checkRevision(compilerInfo) {\n  var compilerRevision = compilerInfo && compilerInfo[0] || 1,\n      currentRevision = _base.COMPILER_REVISION;\n\n  if (compilerRevision >= _base.LAST_COMPATIBLE_COMPILER_REVISION && compilerRevision <= _base.COMPILER_REVISION) {\n    return;\n  }\n\n  if (compilerRevision < _base.LAST_COMPATIBLE_COMPILER_REVISION) {\n    var runtimeVersions = _base.REVISION_CHANGES[currentRevision],\n        compilerVersions = _base.REVISION_CHANGES[compilerRevision];\n    throw new _exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. ' + 'Please update your precompiler to a newer version (' + runtimeVersions + ') or downgrade your runtime to an older version (' + compilerVersions + ').');\n  } else {\n    // Use the embedded version info since the runtime doesn't know about this revision yet\n    throw new _exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. ' + 'Please update your runtime to a newer version (' + compilerInfo[1] + ').');\n  }\n}\n\nfunction template(templateSpec, env) {\n  /* istanbul ignore next */\n  if (!env) {\n    throw new _exception2['default']('No environment passed to template');\n  }\n\n  if (!templateSpec || !templateSpec.main) {\n    throw new _exception2['default']('Unknown template object: ' + typeof templateSpec);\n  }\n\n  templateSpec.main.decorator = templateSpec.main_d; // Note: Using env.VM references rather than local var references throughout this section to allow\n  // for external users to override these as pseudo-supported APIs.\n\n  env.VM.checkRevision(templateSpec.compiler); // backwards compatibility for precompiled templates with compiler-version 7 (<4.3.0)\n\n  var templateWasPrecompiledWithCompilerV7 = templateSpec.compiler && templateSpec.compiler[0] === 7;\n\n  function invokePartialWrapper(partial, context, options) {\n    if (options.hash) {\n      context = Utils.extend({}, context, options.hash);\n\n      if (options.ids) {\n        options.ids[0] = true;\n      }\n    }\n\n    partial = env.VM.resolvePartial.call(this, partial, context, options);\n    var extendedOptions = Utils.extend({}, options, {\n      hooks: this.hooks,\n      protoAccessControl: this.protoAccessControl\n    });\n    var result = env.VM.invokePartial.call(this, partial, context, extendedOptions);\n\n    if (result == null && env.compile) {\n      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);\n      result = options.partials[options.name](context, extendedOptions);\n    }\n\n    if (result != null) {\n      if (options.indent) {\n        var lines = result.split('\\n');\n\n        for (var i = 0, l = lines.length; i < l; i++) {\n          if (!lines[i] && i + 1 === l) {\n            break;\n          }\n\n          lines[i] = options.indent + lines[i];\n        }\n\n        result = lines.join('\\n');\n      }\n\n      return result;\n    } else {\n      throw new _exception2['default']('The partial ' + options.name + ' could not be compiled when running in runtime-only mode');\n    }\n  } // Just add water\n\n\n  var container = {\n    strict: function strict(obj, name, loc) {\n      if (!obj || !(name in obj)) {\n        throw new _exception2['default']('\"' + name + '\" not defined in ' + obj, {\n          loc: loc\n        });\n      }\n\n      return container.lookupProperty(obj, name);\n    },\n    lookupProperty: function lookupProperty(parent, propertyName) {\n      var result = parent[propertyName];\n\n      if (result == null) {\n        return result;\n      }\n\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return result;\n      }\n\n      if (_internalProtoAccess.resultIsAllowed(result, container.protoAccessControl, propertyName)) {\n        return result;\n      }\n\n      return undefined;\n    },\n    lookup: function lookup(depths, name) {\n      var len = depths.length;\n\n      for (var i = 0; i < len; i++) {\n        var result = depths[i] && container.lookupProperty(depths[i], name);\n\n        if (result != null) {\n          return depths[i][name];\n        }\n      }\n    },\n    lambda: function lambda(current, context) {\n      return typeof current === 'function' ? current.call(context) : current;\n    },\n    escapeExpression: Utils.escapeExpression,\n    invokePartial: invokePartialWrapper,\n    fn: function fn(i) {\n      var ret = templateSpec[i];\n      ret.decorator = templateSpec[i + '_d'];\n      return ret;\n    },\n    programs: [],\n    program: function program(i, data, declaredBlockParams, blockParams, depths) {\n      var programWrapper = this.programs[i],\n          fn = this.fn(i);\n\n      if (data || depths || blockParams || declaredBlockParams) {\n        programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);\n      } else if (!programWrapper) {\n        programWrapper = this.programs[i] = wrapProgram(this, i, fn);\n      }\n\n      return programWrapper;\n    },\n    data: function data(value, depth) {\n      while (value && depth--) {\n        value = value._parent;\n      }\n\n      return value;\n    },\n    mergeIfNeeded: function mergeIfNeeded(param, common) {\n      var obj = param || common;\n\n      if (param && common && param !== common) {\n        obj = Utils.extend({}, common, param);\n      }\n\n      return obj;\n    },\n    // An empty object to use as replacement for null-contexts\n    nullContext: Object.seal({}),\n    noop: env.VM.noop,\n    compilerInfo: templateSpec.compiler\n  };\n\n  function ret(context) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n    var data = options.data;\n\n    ret._setup(options);\n\n    if (!options.partial && templateSpec.useData) {\n      data = initData(context, data);\n    }\n\n    var depths = undefined,\n        blockParams = templateSpec.useBlockParams ? [] : undefined;\n\n    if (templateSpec.useDepths) {\n      if (options.depths) {\n        depths = context != options.depths[0] ? [context].concat(options.depths) : options.depths;\n      } else {\n        depths = [context];\n      }\n    }\n\n    function main(context\n    /*, options*/\n    ) {\n      return '' + templateSpec.main(container, context, container.helpers, container.partials, data, blockParams, depths);\n    }\n\n    main = executeDecorators(templateSpec.main, main, container, options.depths || [], data, blockParams);\n    return main(context, options);\n  }\n\n  ret.isTop = true;\n\n  ret._setup = function (options) {\n    if (!options.partial) {\n      var mergedHelpers = Utils.extend({}, env.helpers, options.helpers);\n      wrapHelpersToPassLookupProperty(mergedHelpers, container);\n      container.helpers = mergedHelpers;\n\n      if (templateSpec.usePartial) {\n        // Use mergeIfNeeded here to prevent compiling global partials multiple times\n        container.partials = container.mergeIfNeeded(options.partials, env.partials);\n      }\n\n      if (templateSpec.usePartial || templateSpec.useDecorators) {\n        container.decorators = Utils.extend({}, env.decorators, options.decorators);\n      }\n\n      container.hooks = {};\n      container.protoAccessControl = _internalProtoAccess.createProtoAccessControl(options);\n      var keepHelperInHelpers = options.allowCallsToHelperMissing || templateWasPrecompiledWithCompilerV7;\n\n      _helpers.moveHelperToHooks(container, 'helperMissing', keepHelperInHelpers);\n\n      _helpers.moveHelperToHooks(container, 'blockHelperMissing', keepHelperInHelpers);\n    } else {\n      container.protoAccessControl = options.protoAccessControl; // internal option\n\n      container.helpers = options.helpers;\n      container.partials = options.partials;\n      container.decorators = options.decorators;\n      container.hooks = options.hooks;\n    }\n  };\n\n  ret._child = function (i, data, blockParams, depths) {\n    if (templateSpec.useBlockParams && !blockParams) {\n      throw new _exception2['default']('must pass block params');\n    }\n\n    if (templateSpec.useDepths && !depths) {\n      throw new _exception2['default']('must pass parent depths');\n    }\n\n    return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);\n  };\n\n  return ret;\n}\n\nfunction wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {\n  function prog(context) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n    var currentDepths = depths;\n\n    if (depths && context != depths[0] && !(context === container.nullContext && depths[0] === null)) {\n      currentDepths = [context].concat(depths);\n    }\n\n    return fn(container, context, container.helpers, container.partials, options.data || data, blockParams && [options.blockParams].concat(blockParams), currentDepths);\n  }\n\n  prog = executeDecorators(fn, prog, container, depths, data, blockParams);\n  prog.program = i;\n  prog.depth = depths ? depths.length : 0;\n  prog.blockParams = declaredBlockParams || 0;\n  return prog;\n}\n/**\n * This is currently part of the official API, therefore implementation details should not be changed.\n */\n\n\nfunction resolvePartial(partial, context, options) {\n  if (!partial) {\n    if (options.name === '@partial-block') {\n      partial = options.data['partial-block'];\n    } else {\n      partial = options.partials[options.name];\n    }\n  } else if (!partial.call && !options.name) {\n    // This is a dynamic partial that returned a string\n    options.name = partial;\n    partial = options.partials[partial];\n  }\n\n  return partial;\n}\n\nfunction invokePartial(partial, context, options) {\n  // Use the current closure context to save the partial-block if this partial\n  var currentPartialBlock = options.data && options.data['partial-block'];\n  options.partial = true;\n\n  if (options.ids) {\n    options.data.contextPath = options.ids[0] || options.data.contextPath;\n  }\n\n  var partialBlock = undefined;\n\n  if (options.fn && options.fn !== noop) {\n    (function () {\n      options.data = _base.createFrame(options.data); // Wrapper function to get access to currentPartialBlock from the closure\n\n      var fn = options.fn;\n\n      partialBlock = options.data['partial-block'] = function partialBlockWrapper(context) {\n        var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1]; // Restore the partial-block from the closure for the execution of the block\n        // i.e. the part inside the block of the partial call.\n\n        options.data = _base.createFrame(options.data);\n        options.data['partial-block'] = currentPartialBlock;\n        return fn(context, options);\n      };\n\n      if (fn.partials) {\n        options.partials = Utils.extend({}, options.partials, fn.partials);\n      }\n    })();\n  }\n\n  if (partial === undefined && partialBlock) {\n    partial = partialBlock;\n  }\n\n  if (partial === undefined) {\n    throw new _exception2['default']('The partial ' + options.name + ' could not be found');\n  } else if (partial instanceof Function) {\n    return partial(context, options);\n  }\n}\n\nfunction noop() {\n  return '';\n}\n\nfunction initData(context, data) {\n  if (!data || !('root' in data)) {\n    data = data ? _base.createFrame(data) : {};\n    data.root = context;\n  }\n\n  return data;\n}\n\nfunction executeDecorators(fn, prog, container, depths, data, blockParams) {\n  if (fn.decorator) {\n    var props = {};\n    prog = fn.decorator(prog, props, container, depths && depths[0], data, blockParams, depths);\n    Utils.extend(prog, props);\n  }\n\n  return prog;\n}\n\nfunction wrapHelpersToPassLookupProperty(mergedHelpers, container) {\n  Object.keys(mergedHelpers).forEach(function (helperName) {\n    var helper = mergedHelpers[helperName];\n    mergedHelpers[helperName] = passLookupPropertyOption(helper, container);\n  });\n}\n\nfunction passLookupPropertyOption(helper, container) {\n  var lookupProperty = container.lookupProperty;\n  return _internalWrapHelper.wrapHelper(helper, function (options) {\n    return Utils.extend({\n      lookupProperty: lookupProperty\n    }, options);\n  });\n}","map":{"version":3,"mappings":"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","names":["Utils","checkRevision","compilerInfo","compilerRevision","currentRevision","runtimeVersions","_base","compilerVersions","template","templateSpec","env","main","decorator","main_d","VM","compiler","templateWasPrecompiledWithCompilerV7","invokePartialWrapper","partial","context","options","hash","extend","ids","resolvePartial","call","extendedOptions","hooks","protoAccessControl","result","invokePartial","compile","partials","name","compilerOptions","indent","lines","split","i","l","length","join","container","strict","obj","loc","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","_internalProtoAccess","undefined","lookup","depths","len","lambda","current","escapeExpression","fn","ret","programs","program","data","declaredBlockParams","blockParams","programWrapper","wrapProgram","value","depth","_parent","mergeIfNeeded","param","common","nullContext","seal","noop","arguments","_setup","useData","initData","useBlockParams","useDepths","concat","helpers","executeDecorators","isTop","mergedHelpers","wrapHelpersToPassLookupProperty","usePartial","useDecorators","decorators","keepHelperInHelpers","allowCallsToHelperMissing","_helpers","_child","prog","currentDepths","currentPartialBlock","contextPath","partialBlock","partialBlockWrapper","Function","root","props","keys","forEach","helper","helperName","passLookupPropertyOption","_internalWrapHelper"],"sources":["../../../lib/handlebars/runtime.js"],"sourcesContent":["import * as Utils from './utils';\nimport Exception from './exception';\nimport {\n  COMPILER_REVISION,\n  createFrame,\n  LAST_COMPATIBLE_COMPILER_REVISION,\n  REVISION_CHANGES\n} from './base';\nimport { moveHelperToHooks } from './helpers';\nimport { wrapHelper } from './internal/wrapHelper';\nimport {\n  createProtoAccessControl,\n  resultIsAllowed\n} from './internal/proto-access';\n\nexport function checkRevision(compilerInfo) {\n  const compilerRevision = (compilerInfo && compilerInfo[0]) || 1,\n    currentRevision = COMPILER_REVISION;\n\n  if (\n    compilerRevision >= LAST_COMPATIBLE_COMPILER_REVISION &&\n    compilerRevision <= COMPILER_REVISION\n  ) {\n    return;\n  }\n\n  if (compilerRevision < LAST_COMPATIBLE_COMPILER_REVISION) {\n    const runtimeVersions = REVISION_CHANGES[currentRevision],\n      compilerVersions = REVISION_CHANGES[compilerRevision];\n    throw new Exception(\n      'Template was precompiled with an older version of Handlebars than the current runtime. ' +\n        'Please update your precompiler to a newer version (' +\n        runtimeVersions +\n        ') or downgrade your runtime to an older version (' +\n        compilerVersions +\n        ').'\n    );\n  } else {\n    // Use the embedded version info since the runtime doesn't know about this revision yet\n    throw new Exception(\n      'Template was precompiled with a newer version of Handlebars than the current runtime. ' +\n        'Please update your runtime to a newer version (' +\n        compilerInfo[1] +\n        ').'\n    );\n  }\n}\n\nexport function template(templateSpec, env) {\n  /* istanbul ignore next */\n  if (!env) {\n    throw new Exception('No environment passed to template');\n  }\n  if (!templateSpec || !templateSpec.main) {\n    throw new Exception('Unknown template object: ' + typeof templateSpec);\n  }\n\n  templateSpec.main.decorator = templateSpec.main_d;\n\n  // Note: Using env.VM references rather than local var references throughout this section to allow\n  // for external users to override these as pseudo-supported APIs.\n  env.VM.checkRevision(templateSpec.compiler);\n\n  // backwards compatibility for precompiled templates with compiler-version 7 (<4.3.0)\n  const templateWasPrecompiledWithCompilerV7 =\n    templateSpec.compiler && templateSpec.compiler[0] === 7;\n\n  function invokePartialWrapper(partial, context, options) {\n    if (options.hash) {\n      context = Utils.extend({}, context, options.hash);\n      if (options.ids) {\n        options.ids[0] = true;\n      }\n    }\n    partial = env.VM.resolvePartial.call(this, partial, context, options);\n\n    let extendedOptions = Utils.extend({}, options, {\n      hooks: this.hooks,\n      protoAccessControl: this.protoAccessControl\n    });\n\n    let result = env.VM.invokePartial.call(\n      this,\n      partial,\n      context,\n      extendedOptions\n    );\n\n    if (result == null && env.compile) {\n      options.partials[options.name] = env.compile(\n        partial,\n        templateSpec.compilerOptions,\n        env\n      );\n      result = options.partials[options.name](context, extendedOptions);\n    }\n    if (result != null) {\n      if (options.indent) {\n        let lines = result.split('\\n');\n        for (let i = 0, l = lines.length; i < l; i++) {\n          if (!lines[i] && i + 1 === l) {\n            break;\n          }\n\n          lines[i] = options.indent + lines[i];\n        }\n        result = lines.join('\\n');\n      }\n      return result;\n    } else {\n      throw new Exception(\n        'The partial ' +\n          options.name +\n          ' could not be compiled when running in runtime-only mode'\n      );\n    }\n  }\n\n  // Just add water\n  let container = {\n    strict: function(obj, name, loc) {\n      if (!obj || !(name in obj)) {\n        throw new Exception('\"' + name + '\" not defined in ' + obj, {\n          loc: loc\n        });\n      }\n      return container.lookupProperty(obj, name);\n    },\n    lookupProperty: function(parent, propertyName) {\n      let result = parent[propertyName];\n      if (result == null) {\n        return result;\n      }\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return result;\n      }\n\n      if (resultIsAllowed(result, container.protoAccessControl, propertyName)) {\n        return result;\n      }\n      return undefined;\n    },\n    lookup: function(depths, name) {\n      const len = depths.length;\n      for (let i = 0; i < len; i++) {\n        let result = depths[i] && container.lookupProperty(depths[i], name);\n        if (result != null) {\n          return depths[i][name];\n        }\n      }\n    },\n    lambda: function(current, context) {\n      return typeof current === 'function' ? current.call(context) : current;\n    },\n\n    escapeExpression: Utils.escapeExpression,\n    invokePartial: invokePartialWrapper,\n\n    fn: function(i) {\n      let ret = templateSpec[i];\n      ret.decorator = templateSpec[i + '_d'];\n      return ret;\n    },\n\n    programs: [],\n    program: function(i, data, declaredBlockParams, blockParams, depths) {\n      let programWrapper = this.programs[i],\n        fn = this.fn(i);\n      if (data || depths || blockParams || declaredBlockParams) {\n        programWrapper = wrapProgram(\n          this,\n          i,\n          fn,\n          data,\n          declaredBlockParams,\n          blockParams,\n          depths\n        );\n      } else if (!programWrapper) {\n        programWrapper = this.programs[i] = wrapProgram(this, i, fn);\n      }\n      return programWrapper;\n    },\n\n    data: function(value, depth) {\n      while (value && depth--) {\n        value = value._parent;\n      }\n      return value;\n    },\n    mergeIfNeeded: function(param, common) {\n      let obj = param || common;\n\n      if (param && common && param !== common) {\n        obj = Utils.extend({}, common, param);\n      }\n\n      return obj;\n    },\n    // An empty object to use as replacement for null-contexts\n    nullContext: Object.seal({}),\n\n    noop: env.VM.noop,\n    compilerInfo: templateSpec.compiler\n  };\n\n  function ret(context, options = {}) {\n    let data = options.data;\n\n    ret._setup(options);\n    if (!options.partial && templateSpec.useData) {\n      data = initData(context, data);\n    }\n    let depths,\n      blockParams = templateSpec.useBlockParams ? [] : undefined;\n    if (templateSpec.useDepths) {\n      if (options.depths) {\n        depths =\n          context != options.depths[0]\n            ? [context].concat(options.depths)\n            : options.depths;\n      } else {\n        depths = [context];\n      }\n    }\n\n    function main(context /*, options*/) {\n      return (\n        '' +\n        templateSpec.main(\n          container,\n          context,\n          container.helpers,\n          container.partials,\n          data,\n          blockParams,\n          depths\n        )\n      );\n    }\n\n    main = executeDecorators(\n      templateSpec.main,\n      main,\n      container,\n      options.depths || [],\n      data,\n      blockParams\n    );\n    return main(context, options);\n  }\n\n  ret.isTop = true;\n\n  ret._setup = function(options) {\n    if (!options.partial) {\n      let mergedHelpers = Utils.extend({}, env.helpers, options.helpers);\n      wrapHelpersToPassLookupProperty(mergedHelpers, container);\n      container.helpers = mergedHelpers;\n\n      if (templateSpec.usePartial) {\n        // Use mergeIfNeeded here to prevent compiling global partials multiple times\n        container.partials = container.mergeIfNeeded(\n          options.partials,\n          env.partials\n        );\n      }\n      if (templateSpec.usePartial || templateSpec.useDecorators) {\n        container.decorators = Utils.extend(\n          {},\n          env.decorators,\n          options.decorators\n        );\n      }\n\n      container.hooks = {};\n      container.protoAccessControl = createProtoAccessControl(options);\n\n      let keepHelperInHelpers =\n        options.allowCallsToHelperMissing ||\n        templateWasPrecompiledWithCompilerV7;\n      moveHelperToHooks(container, 'helperMissing', keepHelperInHelpers);\n      moveHelperToHooks(container, 'blockHelperMissing', keepHelperInHelpers);\n    } else {\n      container.protoAccessControl = options.protoAccessControl; // internal option\n      container.helpers = options.helpers;\n      container.partials = options.partials;\n      container.decorators = options.decorators;\n      container.hooks = options.hooks;\n    }\n  };\n\n  ret._child = function(i, data, blockParams, depths) {\n    if (templateSpec.useBlockParams && !blockParams) {\n      throw new Exception('must pass block params');\n    }\n    if (templateSpec.useDepths && !depths) {\n      throw new Exception('must pass parent depths');\n    }\n\n    return wrapProgram(\n      container,\n      i,\n      templateSpec[i],\n      data,\n      0,\n      blockParams,\n      depths\n    );\n  };\n  return ret;\n}\n\nexport function wrapProgram(\n  container,\n  i,\n  fn,\n  data,\n  declaredBlockParams,\n  blockParams,\n  depths\n) {\n  function prog(context, options = {}) {\n    let currentDepths = depths;\n    if (\n      depths &&\n      context != depths[0] &&\n      !(context === container.nullContext && depths[0] === null)\n    ) {\n      currentDepths = [context].concat(depths);\n    }\n\n    return fn(\n      container,\n      context,\n      container.helpers,\n      container.partials,\n      options.data || data,\n      blockParams && [options.blockParams].concat(blockParams),\n      currentDepths\n    );\n  }\n\n  prog = executeDecorators(fn, prog, container, depths, data, blockParams);\n\n  prog.program = i;\n  prog.depth = depths ? depths.length : 0;\n  prog.blockParams = declaredBlockParams || 0;\n  return prog;\n}\n\n/**\n * This is currently part of the official API, therefore implementation details should not be changed.\n */\nexport function resolvePartial(partial, context, options) {\n  if (!partial) {\n    if (options.name === '@partial-block') {\n      partial = options.data['partial-block'];\n    } else {\n      partial = options.partials[options.name];\n    }\n  } else if (!partial.call && !options.name) {\n    // This is a dynamic partial that returned a string\n    options.name = partial;\n    partial = options.partials[partial];\n  }\n  return partial;\n}\n\nexport function invokePartial(partial, context, options) {\n  // Use the current closure context to save the partial-block if this partial\n  const currentPartialBlock = options.data && options.data['partial-block'];\n  options.partial = true;\n  if (options.ids) {\n    options.data.contextPath = options.ids[0] || options.data.contextPath;\n  }\n\n  let partialBlock;\n  if (options.fn && options.fn !== noop) {\n    options.data = createFrame(options.data);\n    // Wrapper function to get access to currentPartialBlock from the closure\n    let fn = options.fn;\n    partialBlock = options.data['partial-block'] = function partialBlockWrapper(\n      context,\n      options = {}\n    ) {\n      // Restore the partial-block from the closure for the execution of the block\n      // i.e. the part inside the block of the partial call.\n      options.data = createFrame(options.data);\n      options.data['partial-block'] = currentPartialBlock;\n      return fn(context, options);\n    };\n    if (fn.partials) {\n      options.partials = Utils.extend({}, options.partials, fn.partials);\n    }\n  }\n\n  if (partial === undefined && partialBlock) {\n    partial = partialBlock;\n  }\n\n  if (partial === undefined) {\n    throw new Exception('The partial ' + options.name + ' could not be found');\n  } else if (partial instanceof Function) {\n    return partial(context, options);\n  }\n}\n\nexport function noop() {\n  return '';\n}\n\nfunction initData(context, data) {\n  if (!data || !('root' in data)) {\n    data = data ? createFrame(data) : {};\n    data.root = context;\n  }\n  return data;\n}\n\nfunction executeDecorators(fn, prog, container, depths, data, blockParams) {\n  if (fn.decorator) {\n    let props = {};\n    prog = fn.decorator(\n      prog,\n      props,\n      container,\n      depths && depths[0],\n      data,\n      blockParams,\n      depths\n    );\n    Utils.extend(prog, props);\n  }\n  return prog;\n}\n\nfunction wrapHelpersToPassLookupProperty(mergedHelpers, container) {\n  Object.keys(mergedHelpers).forEach(helperName => {\n    let helper = mergedHelpers[helperName];\n    mergedHelpers[helperName] = passLookupPropertyOption(helper, container);\n  });\n}\n\nfunction passLookupPropertyOption(helper, container) {\n  const lookupProperty = container.lookupProperty;\n  return wrapHelper(helper, options => {\n    return Utils.extend({ lookupProperty }, options);\n  });\n}\n"]},"metadata":{},"sourceType":"script"}