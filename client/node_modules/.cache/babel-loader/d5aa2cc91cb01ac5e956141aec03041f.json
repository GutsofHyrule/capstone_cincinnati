{"ast":null,"code":"'use strict';\n\nexports.__esModule = true; // istanbul ignore next\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _utils = require('../utils');\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('with', function (context, options) {\n    if (arguments.length != 2) {\n      throw new _exception2['default']('#with requires exactly one argument');\n    }\n\n    if (_utils.isFunction(context)) {\n      context = context.call(this);\n    }\n\n    var fn = options.fn;\n\n    if (!_utils.isEmpty(context)) {\n      var data = options.data;\n\n      if (options.data && options.ids) {\n        data = _utils.createFrame(options.data);\n        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]);\n      }\n\n      return fn(context, {\n        data: data,\n        blockParams: _utils.blockParams([context], [data && data.contextPath])\n      });\n    } else {\n      return options.inverse(this);\n    }\n  });\n};\n\nmodule.exports = exports['default'];","map":{"version":3,"mappings":";;;;;;;;;;qBAMO;;yBACe;;;;qBAEP,UAASA,QAAT,EAAmB;EAChCA,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgC,UAASC,OAAT,EAAkBC,OAAlB,EAA2B;IACzD,IAAIC,SAAS,CAACC,MAAV,IAAoB,CAAxB,EAA2B;MACzB,MAAM,2BAAc,qCAAd,CAAN;IACD;;IACD,IAAIC,kBAAWJ,OAAX,CAAJ,EAAyB;MACvBA,OAAO,GAAGA,OAAO,CAACK,IAAR,CAAa,IAAb,CAAV;IACD;;IAED,IAAIC,EAAE,GAAGL,OAAO,CAACK,EAAjB;;IAEA,IAAI,CAACF,eAAQJ,OAAR,CAAL,EAAuB;MACrB,IAAIO,IAAI,GAAGN,OAAO,CAACM,IAAnB;;MACA,IAAIN,OAAO,CAACM,IAAR,IAAgBN,OAAO,CAACO,GAA5B,EAAiC;QAC/BD,IAAI,GAAGH,mBAAYH,OAAO,CAACM,IAApB,CAAP;QACAA,IAAI,CAACE,WAAL,GAAmBL,yBACjBH,OAAO,CAACM,IAAR,CAAaE,WADI,EAEjBR,OAAO,CAACO,GAAR,CAAY,CAAZ,CAFiB,CAAnB;MAID;;MAED,OAAOF,EAAE,CAACN,OAAD,EAAU;QACjBO,IAAI,EAAEA,IADW;QAEjBG,WAAW,EAAEN,mBAAY,CAACJ,OAAD,CAAZ,EAAuB,CAACO,IAAI,IAAIA,IAAI,CAACE,WAAd,CAAvB;MAFI,CAAV,CAAT;IAID,CAdD,MAcO;MACL,OAAOR,OAAO,CAACU,OAAR,CAAgB,IAAhB,CAAP;IACD;EACF,CA3BD;AA4BD","names":["instance","registerHelper","context","options","arguments","length","_utils","call","fn","data","ids","contextPath","blockParams","inverse"],"sources":["../../../../lib/handlebars/helpers/with.js"],"sourcesContent":["import {\n  appendContextPath,\n  blockParams,\n  createFrame,\n  isEmpty,\n  isFunction\n} from '../utils';\nimport Exception from '../exception';\n\nexport default function(instance) {\n  instance.registerHelper('with', function(context, options) {\n    if (arguments.length != 2) {\n      throw new Exception('#with requires exactly one argument');\n    }\n    if (isFunction(context)) {\n      context = context.call(this);\n    }\n\n    let fn = options.fn;\n\n    if (!isEmpty(context)) {\n      let data = options.data;\n      if (options.data && options.ids) {\n        data = createFrame(options.data);\n        data.contextPath = appendContextPath(\n          options.data.contextPath,\n          options.ids[0]\n        );\n      }\n\n      return fn(context, {\n        data: data,\n        blockParams: blockParams([context], [data && data.contextPath])\n      });\n    } else {\n      return options.inverse(this);\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"script"}